# LandPPT 环境配置文件示例
# 复制此文件为 .env 并填入实际值

# ======================
# 数据库配置
# ======================
# 完整的数据库连接 URL
DATABASE_URL=postgresql://username:password@host:port/database?sslmode=require&options=-c%20search_path%3Dschema,public

# 或者使用分离的配置
DB_HOST=your-supabase-host
DB_PORT=5432
DB_NAME=postgres
DB_USER=your_db_user
DB_PASSWORD=your_secure_password

# ======================
# API 配置（可选，用于 REST API 测试）
# ======================
# 如果使用 Supabase，这些是 Supabase 配置
# 如果使用其他 PostgreSQL 服务，可以配置相应的 API
API_URL=https://your-project-id.supabase.co
API_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-anon-key-payload.signature
API_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-service-key-payload.signature

# ======================
# 存储配置（可选）
# ======================
STORAGE_BUCKET=default-bucket
STORAGE_PROVIDER=postgresql

# ======================
# Cloudflare R2 备份配置
# ======================
# R2 访问密钥 ID
R2_ACCESS_KEY_ID=your_r2_access_key_id

# R2 秘密访问密钥
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key

# R2 端点 URL
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com

# R2 存储桶名称
R2_BUCKET_NAME=landppt-backups

# ======================
# 备份配置
# ======================
# 备份调度 (cron 格式)
# 默认: 每天凌晨 2 点
BACKUP_SCHEDULE=0 2 * * *

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# 备份完成通知 Webhook URL (可选)
# 支持 Slack, Discord, 企业微信等
BACKUP_WEBHOOK_URL=

# ======================
# 健康检查配置
# ======================
# 是否跳过数据库检查
SKIP_DB_CHECK=false

# 是否要求数据库连接
REQUIRE_DB=true

# 是否运行数据库模式检查
RUN_DB_SCHEMA_CHECK=true

# ======================
# 性能配置
# ======================
# 最大工作进程数
MAX_WORKERS=4

# 请求超时时间 (秒)
REQUEST_TIMEOUT=30

# 数据库连接池大小
DB_POOL_SIZE=10

# ======================
# 应用配置
# ======================
# 应用端口
PORT=8000

# 调试模式
DEBUG=false

# 日志级别 (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# 临时文件清理间隔 (小时)
TEMP_CLEANUP_INTERVAL=24

# ======================
# 安全配置
# ======================
# JWT 密钥 (用于会话管理)
JWT_SECRET=your_jwt_secret_key

# API 速率限制 (每分钟请求数)
API_RATE_LIMIT=100

# 允许的文件上传大小 (MB)
MAX_UPLOAD_SIZE=50

# ======================
# 邮件配置 (可选)
# ======================
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_USE_TLS=true

# ======================
# 监控配置 (可选)
# ======================
# Prometheus 指标端点
METRICS_ENABLED=false
METRICS_PORT=9090

# 健康检查端点
HEALTH_CHECK_ENDPOINT=/health

# ======================
# Redis 配置 (可选 - 用于缓存)
# ======================
REDIS_URL=redis://localhost:6379/0
REDIS_ENABLED=false

# ======================
# 开发配置
# ======================
# 开发模式热重载
DEV_RELOAD=false

# 开发服务器主机
DEV_HOST=0.0.0.0

# 允许的主机名 (逗号分隔)
ALLOWED_HOSTS=localhost,127.0.0.1
